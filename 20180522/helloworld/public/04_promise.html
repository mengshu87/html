<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    /*
      promise: 简单说就是一个容器，里面保存着异步操作的结果。

           是异步编程的一种解决方案，比传统的解决方案（回调函数和事件）更合理和更强大

           只有异步操作的结果，可以决定当前是哪一种状态

     有三种状态：
         pending（进行中）
         fulfilled（已成功）
         rejected（失败）

         promise().then().then();
         promise()内是异步的，
         then()里面的是同步的

    * */
    function p(url){
        return new Promise(function(resolve,reject){
            const img=new Image();      //创建一个img元素
            img.src=url;
            img.onload=function(){
                resolve(url);
            }
            img.onerror=function(){
                throw new Error('失败');
            }
        });
    }
    let p1=p('http://wapfile.desktx.com/pc/160823/bigpic/57bbee05a22f7.jpg');
    let p2=p('http://imgstore.cdn.sogou.com/app/a/100540002/492176.jpg');
    //let p3=p('http://att2.citysbs.com/hangzhou/2014/06/12/13/5714x2447-132436_10961402550676429_e697c8ae89349cd359ae310b7c6be40c.jpg');
    /*p1.then(function(url){
        console.log(url);
    });*/
    Promise.all([p1,p2]).then(function(resolve){
        console.log(resolve);
    }).catch(function(error){
        console.log(1234);
    });

</script>
</body>
</html>